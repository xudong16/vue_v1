{"ast":null,"code":"// 导入新增修改页\nimport ChapterAddUpdate from './ChapterAddUpdate.vue';\nexport default {\n  name: 'Chapter',\n  data() {\n    return {\n      // 课程\n      course: {\n        id: undefined,\n        courseName: undefined\n      },\n      // 课程章节数组\n      chapters: []\n    };\n  },\n  methods: {\n    //获取章节列表，参数courseId\n\n    //\n    queryChapter(courseId) {\n      this.$axios.get('/chapters', {\n        params: {\n          courseId: this.course.id,\n          _sort: 'sortNum'\n        }\n      }).then(response => {\n        this.chapters = response.data;\n      });\n    },\n    addUpdateChapter(id) {\n      // 父调用子方法,新增id，课程名称，\n      this.$refs.addUpdate.initDialog(this.course, id);\n    },\n    deleteChapter(id) {\n      this.$confirm('确定要删除该课程吗?', '提示', {\n        type: 'warning'\n      }).then(() => {\n        this.$axios.delete(`/chapters/${id}`).then(response => {\n          this.$message.success('课程删除成功');\n          this.queryChapter(this.course.id);\n        });\n      }).catch(() => {});\n    }\n  },\n  mounted() {\n    let params = this.$route.params;\n    if (params.courseName && params.courseId) {\n      this.course.courseName = params.courseName;\n      this.course.id = params.courseId;\n      this.queryChapter(this.course.id);\n    }\n  },\n  components: {\n    ChapterAddUpdate\n  }\n};","map":{"version":3,"names":["ChapterAddUpdate","name","data","course","id","undefined","courseName","chapters","methods","queryChapter","courseId","$axios","get","params","_sort","then","response","addUpdateChapter","$refs","addUpdate","initDialog","deleteChapter","$confirm","type","delete","$message","success","catch","mounted","$route","components"],"sources":["src/views/page/Chapter.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- 头部 -->\r\n        <el-page-header @back=\"() => this.$router.back()\" :content=\"course.courseName\">\r\n        </el-page-header>\r\n        <!-- 添加章节按钮 -->\r\n        <div class=\"add-btn\">\r\n            <el-button type=\"primary\" @click=\"addUpdateChapter()\">添加章节</el-button>\r\n        </div>\r\n        <!-- 树形控件:展示课程对应的章节信息 -->\r\n        <el-tree :data=\"chapters\">\r\n            <!-- slot-scope：代表当前树节点内容，有两个参数 data表示当前树节点, node表示当前节点状态 -->\r\n            <div class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n                <span>{{ data.chapterName }}</span>\r\n                <span>\r\n                    <el-button type=\"warning\" size=\"small\" icon=\"el-icon-edit\" @click=\"addUpdateChapter(data.id)\"></el-button>\r\n                    <el-button type=\"danger\" size=\"small\" icon=\"el-icon-delete\" @click=\"deleteChapter(data.id)\"></el-button>\r\n                </span>\r\n            </div>\r\n        </el-tree>\r\n\r\n        <chapter-add-update ref=\"addUpdate\" @refreshData=\"queryChapter\"></chapter-add-update>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// 导入新增修改页\r\nimport ChapterAddUpdate from './ChapterAddUpdate.vue';\r\nexport default {\r\n    name: 'Chapter',\r\n    data() {\r\n        return {\r\n            // 课程\r\n            course: {\r\n                id: undefined,\r\n                courseName: undefined\r\n            },\r\n            // 课程章节数组\r\n            chapters: []\r\n        };\r\n    },\r\n    methods: {\r\n        //获取章节列表，参数courseId\r\n\r\n        //\r\n        queryChapter(courseId) {\r\n            this.$axios.get('/chapters', {\r\n                params: {\r\n                    courseId: this.course.id,\r\n                    _sort: 'sortNum',\r\n                }\r\n            }).then(response => {\r\n                this.chapters = response.data;\r\n            });\r\n        },\r\n        addUpdateChapter(id) {\r\n            // 父调用子方法,新增id，课程名称，\r\n            this.$refs.addUpdate.initDialog(this.course,id);\r\n\r\n        },\r\n        deleteChapter(id) {\r\n            this.$confirm('确定要删除该课程吗?', '提示', {\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.$axios.delete(`/chapters/${id}`).then(response => {\r\n                    this.$message.success('课程删除成功');\r\n                    this.queryChapter(this.course.id);\r\n                });\r\n            }).catch(()=> {\r\n            })\r\n        },\r\n    },\r\n    mounted() {\r\n        let params = this.$route.params;\r\n        if (params.courseName && params.courseId) {\r\n            this.course.courseName = params.courseName;\r\n            this.course.id = params.courseId;\r\n\r\n            this.queryChapter(this.course.id)\r\n        }\r\n    },\r\n    components: {\r\n        ChapterAddUpdate\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-page-header {\r\n    margin: 10px 0 30px;\r\n}\r\n\r\n.add-btn {\r\n    margin: 20px 0;\r\n}\r\n\r\n.el-tree /deep/ .el-tree-node__content {\r\n    height: auto;\r\n}\r\n\r\n.custom-tree-node {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    flex: auto;\r\n    padding: 10px;\r\n    border-bottom: 1px solid #e7e7e7;\r\n}\r\n</style>\r\n"],"mappings":"AA0BA;AACA,OAAAA,gBAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,MAAA;QACAC,EAAA,EAAAC,SAAA;QACAC,UAAA,EAAAD;MACA;MACA;MACAE,QAAA;IACA;EACA;EACAC,OAAA;IACA;;IAEA;IACAC,aAAAC,QAAA;MACA,KAAAC,MAAA,CAAAC,GAAA;QACAC,MAAA;UACAH,QAAA,OAAAP,MAAA,CAAAC,EAAA;UACAU,KAAA;QACA;MACA,GAAAC,IAAA,CAAAC,QAAA;QACA,KAAAT,QAAA,GAAAS,QAAA,CAAAd,IAAA;MACA;IACA;IACAe,iBAAAb,EAAA;MACA;MACA,KAAAc,KAAA,CAAAC,SAAA,CAAAC,UAAA,MAAAjB,MAAA,EAAAC,EAAA;IAEA;IACAiB,cAAAjB,EAAA;MACA,KAAAkB,QAAA;QACAC,IAAA;MACA,GAAAR,IAAA;QACA,KAAAJ,MAAA,CAAAa,MAAA,cAAApB,EAAA,IAAAW,IAAA,CAAAC,QAAA;UACA,KAAAS,QAAA,CAAAC,OAAA;UACA,KAAAjB,YAAA,MAAAN,MAAA,CAAAC,EAAA;QACA;MACA,GAAAuB,KAAA,QACA;IACA;EACA;EACAC,QAAA;IACA,IAAAf,MAAA,QAAAgB,MAAA,CAAAhB,MAAA;IACA,IAAAA,MAAA,CAAAP,UAAA,IAAAO,MAAA,CAAAH,QAAA;MACA,KAAAP,MAAA,CAAAG,UAAA,GAAAO,MAAA,CAAAP,UAAA;MACA,KAAAH,MAAA,CAAAC,EAAA,GAAAS,MAAA,CAAAH,QAAA;MAEA,KAAAD,YAAA,MAAAN,MAAA,CAAAC,EAAA;IACA;EACA;EACA0B,UAAA;IACA9B;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}