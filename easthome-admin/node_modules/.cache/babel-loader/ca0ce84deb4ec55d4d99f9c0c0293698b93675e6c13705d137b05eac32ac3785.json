{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { _ } from \"core-js\";\nexport default {\n  name: \"Course\",\n  data() {\n    return {\n      // 查询表单数据\n      searchForm: {\n        courseName: undefined,\n        status: undefined\n      },\n      // 表格数据\n      tableData: [],\n      // 分页数据\n      pageData: {\n        current: 1,\n        size: 5,\n        total: 0\n      }\n    };\n  },\n  methods: {\n    // 查询课程\n    queryCourse() {\n      this.$axios.get(\"/courses\", {\n        params: {\n          // 分页相关\n          _page: this.pageData.current,\n          _limit: this.pageData.size,\n          // 排序相关\n          _sort: \"sortNum\",\n          // 查询条件\n          courseName: this.searchForm.courseName || undefined,\n          status: this.searchForm.status || undefined\n        }\n      }).then(response => {\n        this.tableData = response.data;\n        // 分页时总记录数是在响应头中x-total-count字段中携带的\n        this.pageData.total = parseInt(response.headers[\"x-total-count\"]);\n        // console.log(response.headers['x-total-count']);\n      });\n    },\n    handleCurrentChange(page) {\n      this.pageData.current = page;\n      this.queryCourse();\n    },\n    handleSizeChange(size) {\n      this.pageData.size = size;\n      this.pageData.current = 1;\n      this.queryCourse();\n    },\n    updateStatus(course) {\n      this.$confirm(\"确定修改状态吗\", \"提示\", {\n        type: \"warning\"\n      }).then(() => {\n        this.$axios.patch(`/courses/${course.id}`, course).then(response => {\n          this.$message.success(\"课程状态修改成功\");\n          this.queryCourse();\n        });\n      }).catch(() => {\n        if (course.status == \"0\") {\n          course.status = \"1\";\n        } else if (course.status == \"1\") {\n          course.status = \"0\";\n        }\n      });\n    },\n    addUpdateCourse(id) {\n      if (id) {\n        this.$router.push({\n          name: \"CourseAddUpdate\",\n          params: {\n            id\n          }\n        });\n      } else {\n        this.$router.push({\n          name: \"CourseAddUpdate\"\n        });\n      }\n    },\n    deleteCourse(id) {\n      this.$confirm(\"确认删除该课程吗？\", \"提示\", {\n        type: \"warning\"\n      }).then(() => {\n        this.$axios.delete(`/courses/${id}`).then(response => {\n          this.$message.success(\"删除成功\");\n          this.queryCourse();\n        });\n      }).catch(() => {});\n    },\n    showCourseChapter(row) {\n      this.$router.push({\n        name: \"Chapter\",\n        params: {\n          courseId: row.id,\n          courseName: row.courseName\n        }\n      });\n    }\n  },\n  mounted() {\n    this.queryCourse();\n  }\n};","map":{"version":3,"names":["_","name","data","searchForm","courseName","undefined","status","tableData","pageData","current","size","total","methods","queryCourse","$axios","get","params","_page","_limit","_sort","then","response","parseInt","headers","handleCurrentChange","page","handleSizeChange","updateStatus","course","$confirm","type","patch","id","$message","success","catch","addUpdateCourse","$router","push","deleteCourse","delete","showCourseChapter","row","courseId","mounted"],"sources":["src/views/page/Course.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 查询表单 -->\n    <el-form inline>\n      <el-form-item label=\"课程名称\">\n        <el-input\n          v-model=\"searchForm.courseName\"\n          placeholder=\"课程名称\"\n          clearable\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"课程状态\">\n        <el-select v-model=\"searchForm.status\" placeholder=\"课程状态\" clearable>\n          <el-option label=\"已发布\" value=\"1\"></el-option>\n          <el-option label=\"草稿\" value=\"0\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button @click=\"queryCourse\">查询</el-button>\n        <el-button type=\"primary\" @click=\"addUpdateCourse()\">新建课程</el-button>\n      </el-form-item>\n    </el-form>\n\n    <!-- 数据表格 -->\n    <el-table :data=\"tableData\" border stripe>\n      <el-table-column prop=\"id\" label=\"ID\" header-align=\"center\" width=\"70\" fixed align=\"center\"></el-table-column>\n      <el-table-column prop=\"courseName\" label=\"课程名称\" header-align=\"center\" fixed align=\"center\"></el-table-column>\n      <el-table-column prop=\"teacherName\" label=\"授课讲师\" header-align=\"center\" align=\"center\"></el-table-column>\n      <el-table-column prop=\"price\" label=\"价格\" header-align=\"center\">\n        <template slot-scope=\"scope\"> ¥{{ scope.row.price }} </template>\n      </el-table-column>\n      <el-table-column prop=\"sortNum\" label=\"排序\" header-align=\"center\" width=\"70\"></el-table-column>\n      <el-table-column prop=\"status\" label=\"状态\" header-align=\"center\" align=\"center\" width=\"160\">\n        <template slot-scope=\"scope\">\n          <el-switch v-model=\"scope.row.status\" active-text=\"已发布\" inactive-text=\"草稿\" active-value=\"1\" inactive-value=\"0\" @change=\"updateStatus(scope.row)\">\n          </el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"操作\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"260\"\n        fixed=\"right\"\n      >\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"warning\"\n            size=\"mini\"\n            @click=\"addUpdateCourse(scope.row.id)\"\n            >编辑</el-button\n          >\n          <el-button\n            type=\"danger\"\n            size=\"mini\"\n            @click=\"deleteCourse(scope.row.id)\">删除</el-button>\n          <el-button size=\"mini\" @click=\"showCourseChapter(scope.row)\">课程章节</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 分页 -->\n    <el-pagination\n      :current-page=\"pageData.current\"\n      :page-size=\"pageData.size\"\n      :total=\"pageData.total\"\n      :page-sizes=\"[5, 10, 20, 50]\"\n      layout=\"sizes, prev, pager, next, ->, total, jumper\"\n      @current-change=\"handleCurrentChange\"\n      @size-change=\"handleSizeChange\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport { _ } from \"core-js\";\n\nexport default {\n  name: \"Course\",\n  data() {\n    return {\n      // 查询表单数据\n      searchForm: {\n        courseName: undefined,\n        status: undefined,\n      },\n      // 表格数据\n      tableData: [],\n      // 分页数据\n      pageData: {\n        current: 1,\n        size: 5,\n        total: 0,\n      },\n    };\n  },\n  methods: {\n    // 查询课程\n    queryCourse() {\n      this.$axios\n        .get(\"/courses\", {\n          params: {\n            // 分页相关\n            _page: this.pageData.current,\n            _limit: this.pageData.size,\n            // 排序相关\n            _sort: \"sortNum\",\n            // 查询条件\n            courseName: this.searchForm.courseName || undefined,\n            status: this.searchForm.status || undefined,\n          },\n        })\n        .then((response) => {\n          this.tableData = response.data;\n          // 分页时总记录数是在响应头中x-total-count字段中携带的\n          this.pageData.total = parseInt(response.headers[\"x-total-count\"]);\n          // console.log(response.headers['x-total-count']);\n        });\n    },\n    handleCurrentChange(page) {\n      this.pageData.current = page;\n      this.queryCourse();\n    },\n    handleSizeChange(size) {\n      this.pageData.size = size;\n      this.pageData.current = 1;\n      this.queryCourse();\n    },\n    updateStatus(course) {\n      this.$confirm(\"确定修改状态吗\", \"提示\", { type: \"warning\" })\n        .then(() => {\n          this.$axios\n            .patch(`/courses/${course.id}`, course)\n            .then((response) => {\n              this.$message.success(\"课程状态修改成功\");\n              this.queryCourse();\n            });\n        })\n        .catch(() => {\n          if (course.status == \"0\") {\n            course.status = \"1\";\n          } else if (course.status == \"1\") {\n            course.status = \"0\";\n          }\n        });\n    },\n    addUpdateCourse(id) {\n      if (id) {\n        this.$router.push({ name: \"CourseAddUpdate\", params: { id } });\n      } else {\n        this.$router.push({ name: \"CourseAddUpdate\" });\n      }\n    },\n    deleteCourse(id) {\n      this.$confirm(\"确认删除该课程吗？\", \"提示\", { type: \"warning\" })\n        .then(() => {\n          this.$axios.delete(`/courses/${id}`).then((response) => {\n            this.$message.success(\"删除成功\");\n            this.queryCourse();\n          });\n        })\n        .catch(() => {});\n    },\n    showCourseChapter(row) {\n      this.$router.push({ name: \"Chapter\", params: { courseId: row.id, courseName: row.courseName } });\n    },\n  },\n  mounted() {\n    this.queryCourse();\n  },\n};\n</script>\n\n<style scoped>\n.el-form-item {\n    margin: 20px 0px 20px 40px;\n}\n</style>\n"],"mappings":";AA2EA,SAAAA,CAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACA;MACAC,UAAA;QACAC,UAAA,EAAAC,SAAA;QACAC,MAAA,EAAAD;MACA;MACA;MACAE,SAAA;MACA;MACAC,QAAA;QACAC,OAAA;QACAC,IAAA;QACAC,KAAA;MACA;IACA;EACA;EACAC,OAAA;IACA;IACAC,YAAA;MACA,KAAAC,MAAA,CACAC,GAAA;QACAC,MAAA;UACA;UACAC,KAAA,OAAAT,QAAA,CAAAC,OAAA;UACAS,MAAA,OAAAV,QAAA,CAAAE,IAAA;UACA;UACAS,KAAA;UACA;UACAf,UAAA,OAAAD,UAAA,CAAAC,UAAA,IAAAC,SAAA;UACAC,MAAA,OAAAH,UAAA,CAAAG,MAAA,IAAAD;QACA;MACA,GACAe,IAAA,CAAAC,QAAA;QACA,KAAAd,SAAA,GAAAc,QAAA,CAAAnB,IAAA;QACA;QACA,KAAAM,QAAA,CAAAG,KAAA,GAAAW,QAAA,CAAAD,QAAA,CAAAE,OAAA;QACA;MACA;IACA;IACAC,oBAAAC,IAAA;MACA,KAAAjB,QAAA,CAAAC,OAAA,GAAAgB,IAAA;MACA,KAAAZ,WAAA;IACA;IACAa,iBAAAhB,IAAA;MACA,KAAAF,QAAA,CAAAE,IAAA,GAAAA,IAAA;MACA,KAAAF,QAAA,CAAAC,OAAA;MACA,KAAAI,WAAA;IACA;IACAc,aAAAC,MAAA;MACA,KAAAC,QAAA;QAAAC,IAAA;MAAA,GACAV,IAAA;QACA,KAAAN,MAAA,CACAiB,KAAA,aAAAH,MAAA,CAAAI,EAAA,IAAAJ,MAAA,EACAR,IAAA,CAAAC,QAAA;UACA,KAAAY,QAAA,CAAAC,OAAA;UACA,KAAArB,WAAA;QACA;MACA,GACAsB,KAAA;QACA,IAAAP,MAAA,CAAAtB,MAAA;UACAsB,MAAA,CAAAtB,MAAA;QACA,WAAAsB,MAAA,CAAAtB,MAAA;UACAsB,MAAA,CAAAtB,MAAA;QACA;MACA;IACA;IACA8B,gBAAAJ,EAAA;MACA,IAAAA,EAAA;QACA,KAAAK,OAAA,CAAAC,IAAA;UAAArC,IAAA;UAAAe,MAAA;YAAAgB;UAAA;QAAA;MACA;QACA,KAAAK,OAAA,CAAAC,IAAA;UAAArC,IAAA;QAAA;MACA;IACA;IACAsC,aAAAP,EAAA;MACA,KAAAH,QAAA;QAAAC,IAAA;MAAA,GACAV,IAAA;QACA,KAAAN,MAAA,CAAA0B,MAAA,aAAAR,EAAA,IAAAZ,IAAA,CAAAC,QAAA;UACA,KAAAY,QAAA,CAAAC,OAAA;UACA,KAAArB,WAAA;QACA;MACA,GACAsB,KAAA;IACA;IACAM,kBAAAC,GAAA;MACA,KAAAL,OAAA,CAAAC,IAAA;QAAArC,IAAA;QAAAe,MAAA;UAAA2B,QAAA,EAAAD,GAAA,CAAAV,EAAA;UAAA5B,UAAA,EAAAsC,GAAA,CAAAtC;QAAA;MAAA;IACA;EACA;EACAwC,QAAA;IACA,KAAA/B,WAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}